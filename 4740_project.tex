\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={STSCI 4740 Final Project},
            pdfauthor={Bingjie Huang, Jianying Liang, Fangfei Lu, Zhengyan Yuan},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{STSCI 4740 Final Project}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Bingjie Huang, Jianying Liang, Fangfei Lu, Zhengyan Yuan}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{12/11/2020}


\begin{document}
\maketitle

\section{Lung Cancer Prediction}\label{lung-cancer-prediction}

\subsection{1.0 PROJECT DESCRIPTION}\label{project-description}

Cancer is a very concerning topic that even some people avoid talking
about. Nowadays, lung cancer is the leading cause of cancer deaths
worldwide. Generally, we understand that people who smoke would have
great risks of lung cancer, although researchers found that lung cancer
can occur among non-smokers. In this study, we predicted the risk levels
of getting lung cancer by different statistical methods using multiple
potential factors.

\subsection{1.1 RESEARCH QUESTION}\label{research-question}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  How to predict the risk levels using different machine learning
  methods?\\
\item
  Which method performs the best?
\end{enumerate}

\subsection{1.1 -- VARIABLES}\label{variables}

We used 23 predictors, including age, gender, air pollution, alcohol use
dust allergy and so on. Additionally, cancer level served as the
response variable.\\
The predictors other than age are integers ranging from 1. Smaller
numbers represent the lower levels for each variable, while bigger
numbers represent more extreme cases. The response variable, cancer
level, is categorical variable, which has three levels, low, median and
high, representing different risk levels of getting lung cancer.

\section{Exploratory Eata Enalysis}\label{exploratory-eata-enalysis}

When performing EDA, we set 0.9 threshold to check for correlation among
variables and we found none.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(ggplot2)}
\KeywordTok{library}\NormalTok{(}\StringTok{"readxl"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'readxl' was built under R version 3.5.2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data<-}\KeywordTok{read_excel}\NormalTok{(}\StringTok{"/Users/UnaLiang/Desktop/学校作业/STSCI4740/cancer_data.xlsx"}\NormalTok{)}
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(data)}
\NormalTok{data}\OperatorTok{$}\NormalTok{Level <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(df}\OperatorTok{$}\NormalTok{Level)}
\NormalTok{magnitude.counts <-}\StringTok{ }\KeywordTok{table}\NormalTok{(df}\OperatorTok{$}\NormalTok{Level)}
\KeywordTok{library}\NormalTok{(skimr)}
\NormalTok{df }\OperatorTok{%>%}
\StringTok{    }\NormalTok{dplyr}\OperatorTok{::}\KeywordTok{group_by}\NormalTok{(Level) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{skim}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}ll@{}}
\caption{Data summary}\tabularnewline
\toprule
Name & Piped data\tabularnewline
Number of rows & 1000\tabularnewline
Number of columns & 25\tabularnewline
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ &\tabularnewline
Column type frequency: &\tabularnewline
character & 1\tabularnewline
numeric & 23\tabularnewline
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ &\tabularnewline
Group variables & Level\tabularnewline
\bottomrule
\end{longtable}

\textbf{Variable type: character}

\begin{longtable}[]{@{}llrrrrrrr@{}}
\toprule
skim\_variable & Level & n\_missing & complete\_rate & min & max & empty
& n\_unique & whitespace\tabularnewline
\midrule
\endhead
Patient.Id & High & 0 & 1 & 2 & 5 & 0 & 365 & 0\tabularnewline
Patient.Id & Low & 0 & 1 & 2 & 4 & 0 & 303 & 0\tabularnewline
Patient.Id & Medium & 0 & 1 & 2 & 4 & 0 & 332 & 0\tabularnewline
\bottomrule
\end{longtable}

\textbf{Variable type: numeric}

\begin{longtable}[]{@{}llrrrrrrrrrl@{}}
\toprule
skim\_variable & Level & n\_missing & complete\_rate & mean & sd & p0 &
p25 & p50 & p75 & p100 & hist\tabularnewline
\midrule
\endhead
Age & High & 0 & 1 & 37.32 & 10.72 & 18 & 29 & 36 & 44 & 64 &
▆▇▇▅▂\tabularnewline
Age & Low & 0 & 1 & 35.41 & 12.13 & 17 & 25 & 33 & 44 & 62 &
▇▇▅▃▃\tabularnewline
Age & Medium & 0 & 1 & 38.62 & 13.02 & 14 & 32 & 38 & 46 & 73 &
▃▇▇▂▂\tabularnewline
Gender & High & 0 & 1 & 1.31 & 0.46 & 1 & 1 & 1 & 2 & 2 &
▇▁▁▁▃\tabularnewline
Gender & Low & 0 & 1 & 1.51 & 0.50 & 1 & 1 & 2 & 2 & 2 &
▇▁▁▁▇\tabularnewline
Gender & Medium & 0 & 1 & 1.41 & 0.49 & 1 & 1 & 1 & 2 & 2 &
▇▁▁▁▆\tabularnewline
Air.Pollution & High & 0 & 1 & 5.69 & 1.27 & 2 & 6 & 6 & 6 & 8 &
▁▂▁▇▂\tabularnewline
Air.Pollution & Low & 0 & 1 & 2.60 & 1.11 & 1 & 2 & 3 & 3 & 6 &
▇▆▁▁▁\tabularnewline
Air.Pollution & Medium & 0 & 1 & 2.93 & 1.87 & 1 & 1 & 2 & 4 & 6 &
▇▃▁▁▃\tabularnewline
Alcohol.use & High & 0 & 1 & 6.83 & 1.16 & 4 & 7 & 7 & 8 & 8 &
▁▃▁▇▆\tabularnewline
Alcohol.use & Low & 0 & 1 & 2.23 & 1.26 & 1 & 1 & 2 & 3 & 7 &
▇▃▁▁▁\tabularnewline
Alcohol.use & Medium & 0 & 1 & 4.20 & 2.65 & 1 & 2 & 4 & 6 & 8 &
▇▁▂▃▃\tabularnewline
Dust.Allergy & High & 0 & 1 & 6.62 & 0.92 & 2 & 7 & 7 & 7 & 7 &
▁▁▁▂▇\tabularnewline
Dust.Allergy & Low & 0 & 1 & 3.11 & 1.66 & 1 & 2 & 3 & 4 & 8 &
▇▃▇▁▁\tabularnewline
Dust.Allergy & Medium & 0 & 1 & 5.44 & 1.46 & 3 & 4 & 5 & 7 & 7 &
▂▃▅▂▇\tabularnewline
OccuPational.Hazards & High & 0 & 1 & 6.48 & 0.98 & 3 & 7 & 7 & 7 & 7 &
▁▁▂▁▇\tabularnewline
OccuPational.Hazards & Low & 0 & 1 & 3.00 & 1.52 & 1 & 2 & 3 & 4 & 7 &
▇▆▅▁▁\tabularnewline
OccuPational.Hazards & Medium & 0 & 1 & 4.72 & 2.04 & 2 & 3 & 5 & 7 & 8
& ▇▃▃▁▆\tabularnewline
Genetic.Risk & High & 0 & 1 & 6.38 & 0.82 & 5 & 6 & 7 & 7 & 7 &
▃▁▂▁▇\tabularnewline
Genetic.Risk & Low & 0 & 1 & 2.73 & 1.43 & 1 & 2 & 2 & 3 & 7 &
▇▅▁▁▂\tabularnewline
Genetic.Risk & Medium & 0 & 1 & 4.29 & 2.07 & 2 & 2 & 3 & 7 & 7 &
▇▁▁▁▅\tabularnewline
chronic.Lung.Disease & High & 0 & 1 & 5.83 & 1.00 & 4 & 6 & 6 & 6 & 7 &
▃▁▁▇▃\tabularnewline
chronic.Lung.Disease & Low & 0 & 1 & 3.09 & 1.70 & 1 & 2 & 3 & 4 & 7 &
▇▅▁▂▂\tabularnewline
chronic.Lung.Disease & Medium & 0 & 1 & 3.96 & 1.61 & 2 & 2 & 4 & 6 & 6
& ▇▅▅▂▇\tabularnewline
Balanced.Diet & High & 0 & 1 & 6.62 & 0.63 & 4 & 6 & 7 & 7 & 7 &
▁▁▁▃▇\tabularnewline
Balanced.Diet & Low & 0 & 1 & 3.00 & 1.57 & 1 & 2 & 3 & 4 & 7 &
▇▅▂▂▁\tabularnewline
Balanced.Diet & Medium & 0 & 1 & 3.51 & 1.76 & 2 & 2 & 3 & 5 & 7 &
▇▁▁▂▁\tabularnewline
Obesity & High & 0 & 1 & 6.68 & 1.00 & 3 & 7 & 7 & 7 & 7 &
▁▁▁▁▇\tabularnewline
Obesity & Low & 0 & 1 & 2.41 & 1.05 & 1 & 2 & 2 & 3 & 4 &
▆▇▁▆▅\tabularnewline
Obesity & Medium & 0 & 1 & 3.90 & 1.38 & 2 & 3 & 4 & 4 & 7 &
▇▇▁▁▂\tabularnewline
Smoking & High & 0 & 1 & 6.07 & 2.16 & 2 & 6 & 7 & 7 & 8 &
▂▁▁▁▇\tabularnewline
Smoking & Low & 0 & 1 & 3.02 & 1.78 & 1 & 2 & 3 & 4 & 7 &
▇▃▂▁▃\tabularnewline
Smoking & Medium & 0 & 1 & 2.45 & 1.67 & 1 & 1 & 2 & 3 & 8 &
▇▅▁▁▁\tabularnewline
Passive.Smoker & High & 0 & 1 & 6.53 & 1.78 & 3 & 7 & 7 & 8 & 8 &
▃▁▁▇▅\tabularnewline
Passive.Smoker & Low & 0 & 1 & 2.63 & 1.35 & 1 & 2 & 2 & 4 & 6 &
▇▁▃▁▁\tabularnewline
Passive.Smoker & Medium & 0 & 1 & 3.05 & 1.21 & 2 & 2 & 3 & 4 & 6 &
▇▂▅▁▁\tabularnewline
Chest.Pain & High & 0 & 1 & 6.39 & 1.50 & 2 & 7 & 7 & 7 & 9 &
▁▂▁▇▁\tabularnewline
Chest.Pain & Low & 0 & 1 & 2.83 & 1.82 & 1 & 1 & 2 & 4 & 7 &
▇▃▂▁▂\tabularnewline
Chest.Pain & Medium & 0 & 1 & 3.75 & 1.77 & 2 & 2 & 3 & 4 & 8 &
▇▃▁▁▁\tabularnewline
Coughing.of.Blood & High & 0 & 1 & 7.44 & 1.13 & 3 & 7 & 7 & 8 & 9 &
▁▁▂▇▇\tabularnewline
Coughing.of.Blood & Low & 0 & 1 & 2.86 & 1.69 & 1 & 2 & 2 & 4 & 8 &
▇▂▅▁▁\tabularnewline
Coughing.of.Blood & Medium & 0 & 1 & 3.85 & 1.33 & 2 & 3 & 4 & 4 & 7 &
▇▅▂▁▂\tabularnewline
Fatigue & High & 0 & 1 & 5.59 & 2.37 & 2 & 4 & 5 & 8 & 9 &
▅▃▃▁▇\tabularnewline
Fatigue & Low & 0 & 1 & 2.17 & 0.90 & 1 & 1 & 2 & 3 & 4 &
▆▇▁▆▂\tabularnewline
Fatigue & Medium & 0 & 1 & 3.49 & 1.50 & 1 & 2 & 4 & 4 & 6 &
▇▅▇▂▃\tabularnewline
Weight.Loss & High & 0 & 1 & 4.47 & 2.11 & 2 & 2 & 5 & 7 & 7 &
▇▁▂▂▆\tabularnewline
Weight.Loss & Low & 0 & 1 & 2.50 & 1.60 & 1 & 1 & 2 & 3 & 8 &
▇▂▂▁▁\tabularnewline
Weight.Loss & Medium & 0 & 1 & 4.42 & 2.25 & 1 & 3 & 5 & 7 & 7 &
▆▅▁▃▇\tabularnewline
Shortness.of.Breath & High & 0 & 1 & 5.33 & 2.26 & 2 & 4 & 5 & 7 & 9 &
▆▅▇▃▅\tabularnewline
Shortness.of.Breath & Low & 0 & 1 & 2.50 & 1.45 & 1 & 1 & 2 & 3 & 7 &
▇▅▁▁▁\tabularnewline
Shortness.of.Breath & Medium & 0 & 1 & 4.63 & 2.00 & 2 & 2 & 6 & 6 & 7 &
▆▁▁▇▂\tabularnewline
Wheezing & High & 0 & 1 & 3.88 & 2.60 & 1 & 1 & 2 & 7 & 7 &
▇▁▁▁▇\tabularnewline
Wheezing & Low & 0 & 1 & 2.57 & 1.03 & 1 & 2 & 2 & 4 & 4 &
▂▇▁▃▅\tabularnewline
Wheezing & Medium & 0 & 1 & 4.76 & 1.37 & 1 & 4 & 5 & 5 & 8 &
▁▁▇▁▁\tabularnewline
Swallowing.Difficulty & High & 0 & 1 & 4.19 & 2.35 & 1 & 2 & 4 & 6 & 8 &
▇▁▇▂▅\tabularnewline
Swallowing.Difficulty & Low & 0 & 1 & 2.76 & 1.65 & 1 & 2 & 2 & 4 & 8 &
▇▃▃▁▁\tabularnewline
Swallowing.Difficulty & Medium & 0 & 1 & 4.16 & 2.40 & 1 & 2 & 4 & 6 & 8
& ▇▁▇▃▃\tabularnewline
Clubbing.of.Finger.Nails & High & 0 & 1 & 4.21 & 2.03 & 2 & 2 & 4 & 5 &
9 & ▇▇▃▂▂\tabularnewline
Clubbing.of.Finger.Nails & Low & 0 & 1 & 2.47 & 1.18 & 1 & 2 & 2 & 3 & 5
& ▆▇▆▃▂\tabularnewline
Clubbing.of.Finger.Nails & Medium & 0 & 1 & 4.94 & 2.89 & 1 & 3 & 4 & 8
& 9 & ▆▇▃▂▇\tabularnewline
Frequent.Cold & High & 0 & 1 & 4.38 & 1.74 & 1 & 3 & 4 & 6 & 7 &
▃▂▆▁▇\tabularnewline
Frequent.Cold & Low & 0 & 1 & 2.37 & 1.08 & 1 & 2 & 2 & 3 & 5 &
▃▇▅▁▁\tabularnewline
Frequent.Cold & Medium & 0 & 1 & 3.67 & 1.92 & 1 & 3 & 3 & 6 & 7 &
▅▇▃▁▆\tabularnewline
Dry.Cough & High & 0 & 1 & 4.78 & 2.25 & 1 & 2 & 6 & 7 & 7 &
▅▁▁▂▇\tabularnewline
Dry.Cough & Low & 0 & 1 & 2.91 & 1.45 & 1 & 2 & 3 & 4 & 6 &
▇▅▃▁▁\tabularnewline
Dry.Cough & Medium & 0 & 1 & 3.70 & 1.82 & 1 & 2 & 4 & 5 & 7 &
▇▁▅▃▃\tabularnewline
Snoring & High & 0 & 1 & 3.23 & 1.49 & 1 & 2 & 3 & 4 & 7 &
▇▆▂▃▂\tabularnewline
Snoring & Low & 0 & 1 & 2.14 & 1.03 & 1 & 1 & 2 & 3 & 4 &
▇▇▁▅▃\tabularnewline
Snoring & Medium & 0 & 1 & 3.31 & 1.53 & 1 & 2 & 3 & 5 & 6 &
▇▃▃▅▁\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#find the correlation among variables:}
\NormalTok{cor_x<-}\KeywordTok{cor}\NormalTok{(df[,}\KeywordTok{c}\NormalTok{(}\DecValTok{2}\OperatorTok{:}\DecValTok{24}\NormalTok{)])}
\KeywordTok{library}\NormalTok{(caret)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'caret' was built under R version 3.5.2
\end{verbatim}

\begin{verbatim}
## Loading required package: lattice
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hc<-}\KeywordTok{findCorrelation}\NormalTok{(cor_x,}\DataTypeTok{cutoff =} \FloatTok{0.9}\NormalTok{)}
\NormalTok{hc}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## integer(0)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{MD <-}\StringTok{ }\KeywordTok{mahalanobis}\NormalTok{(df[,}\KeywordTok{c}\NormalTok{(}\DecValTok{2}\OperatorTok{:}\DecValTok{24}\NormalTok{)],}\KeywordTok{colMeans}\NormalTok{(df[,}\KeywordTok{c}\NormalTok{(}\DecValTok{2}\OperatorTok{:}\DecValTok{24}\NormalTok{)]),}\KeywordTok{cov}\NormalTok{(df[,}\KeywordTok{c}\NormalTok{(}\DecValTok{2}\OperatorTok{:}\DecValTok{24}\NormalTok{)]))}
\NormalTok{df}\OperatorTok{$}\NormalTok{MD <-}\KeywordTok{round}\NormalTok{(MD,}\DecValTok{3}\NormalTok{)}
\CommentTok{#MD[1:200] %>% round(2)}
\CommentTok{#Mahalanobis outliers (set to 50)}
\NormalTok{df}\OperatorTok{$}\NormalTok{outlier_maha <-}\StringTok{ }\OtherTok{FALSE}
\NormalTok{df}\OperatorTok{$}\NormalTok{outlier_maha[df}\OperatorTok{$}\NormalTok{MD }\OperatorTok{>}\DecValTok{50}\NormalTok{] <-}\StringTok{ }\OtherTok{TRUE}
\KeywordTok{summary}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Patient.Id             Age            Gender      Air.Pollution 
##  Length:1000        Min.   :14.00   Min.   :1.000   Min.   :1.00  
##  Class :character   1st Qu.:27.75   1st Qu.:1.000   1st Qu.:2.00  
##  Mode  :character   Median :36.00   Median :1.000   Median :3.00  
##                     Mean   :37.17   Mean   :1.402   Mean   :3.84  
##                     3rd Qu.:45.00   3rd Qu.:2.000   3rd Qu.:6.00  
##                     Max.   :73.00   Max.   :2.000   Max.   :8.00  
##   Alcohol.use     Dust.Allergy   OccuPational.Hazards  Genetic.Risk 
##  Min.   :1.000   Min.   :1.000   Min.   :1.00         Min.   :1.00  
##  1st Qu.:2.000   1st Qu.:4.000   1st Qu.:3.00         1st Qu.:2.00  
##  Median :5.000   Median :6.000   Median :5.00         Median :5.00  
##  Mean   :4.563   Mean   :5.165   Mean   :4.84         Mean   :4.58  
##  3rd Qu.:7.000   3rd Qu.:7.000   3rd Qu.:7.00         3rd Qu.:7.00  
##  Max.   :8.000   Max.   :8.000   Max.   :8.00         Max.   :7.00  
##  chronic.Lung.Disease Balanced.Diet      Obesity         Smoking     
##  Min.   :1.00         Min.   :1.000   Min.   :1.000   Min.   :1.000  
##  1st Qu.:3.00         1st Qu.:2.000   1st Qu.:3.000   1st Qu.:2.000  
##  Median :4.00         Median :4.000   Median :4.000   Median :3.000  
##  Mean   :4.38         Mean   :4.491   Mean   :4.465   Mean   :3.948  
##  3rd Qu.:6.00         3rd Qu.:7.000   3rd Qu.:7.000   3rd Qu.:7.000  
##  Max.   :7.00         Max.   :7.000   Max.   :7.000   Max.   :8.000  
##  Passive.Smoker    Chest.Pain    Coughing.of.Blood    Fatigue     
##  Min.   :1.000   Min.   :1.000   Min.   :1.000     Min.   :1.000  
##  1st Qu.:2.000   1st Qu.:2.000   1st Qu.:3.000     1st Qu.:2.000  
##  Median :4.000   Median :4.000   Median :4.000     Median :3.000  
##  Mean   :4.195   Mean   :4.438   Mean   :4.859     Mean   :3.856  
##  3rd Qu.:7.000   3rd Qu.:7.000   3rd Qu.:7.000     3rd Qu.:5.000  
##  Max.   :8.000   Max.   :9.000   Max.   :9.000     Max.   :9.000  
##   Weight.Loss    Shortness.of.Breath    Wheezing     Swallowing.Difficulty
##  Min.   :1.000   Min.   :1.00        Min.   :1.000   Min.   :1.000        
##  1st Qu.:2.000   1st Qu.:2.00        1st Qu.:2.000   1st Qu.:2.000        
##  Median :3.000   Median :4.00        Median :4.000   Median :4.000        
##  Mean   :3.855   Mean   :4.24        Mean   :3.777   Mean   :3.746        
##  3rd Qu.:6.000   3rd Qu.:6.00        3rd Qu.:5.000   3rd Qu.:5.000        
##  Max.   :8.000   Max.   :9.00        Max.   :8.000   Max.   :8.000        
##  Clubbing.of.Finger.Nails Frequent.Cold     Dry.Cough        Snoring     
##  Min.   :1.000            Min.   :1.000   Min.   :1.000   Min.   :1.000  
##  1st Qu.:2.000            1st Qu.:2.000   1st Qu.:2.000   1st Qu.:2.000  
##  Median :4.000            Median :3.000   Median :4.000   Median :3.000  
##  Mean   :3.923            Mean   :3.536   Mean   :3.853   Mean   :2.926  
##  3rd Qu.:5.000            3rd Qu.:5.000   3rd Qu.:6.000   3rd Qu.:4.000  
##  Max.   :9.000            Max.   :7.000   Max.   :7.000   Max.   :7.000  
##     Level                 MD         outlier_maha   
##  Length:1000        Min.   : 9.699   Mode :logical  
##  Class :character   1st Qu.:14.912   FALSE:970      
##  Mode  :character   Median :19.355   TRUE :30       
##                     Mean   :22.977                  
##                     3rd Qu.:29.204                  
##                     Max.   :57.487
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#Therefore, based on the summary(df), we have 30 data which could be outliers.}
\CommentTok{#Those are:}
\NormalTok{dplyr}\OperatorTok{::}\KeywordTok{filter}\NormalTok{(df, outlier_maha }\OperatorTok{==}\StringTok{ }\OtherTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Patient.Id Age Gender Air.Pollution Alcohol.use Dust.Allergy
## 1         P10  17      1             3           1            5
## 2        P112  17      1             3           1            5
## 3        P125  35      2             2           6            2
## 4        P126  42      1             2           4            5
## 5        P212  17      1             3           1            5
## 6        P225  35      2             2           6            2
## 7        P226  42      1             2           4            5
## 8         P23  35      2             2           6            2
## 9         P24  42      1             2           4            5
## 10       P312  17      1             3           1            5
## 11       P325  35      2             2           6            2
## 12       P326  42      1             2           4            5
## 13       P412  17      1             3           1            5
## 14       P425  35      2             2           6            2
## 15       P426  42      1             2           4            5
## 16       P512  17      1             3           1            5
## 17       P525  35      1             2           6            2
## 18       P526  42      1             2           4            5
## 19       P612  17      1             3           1            5
## 20       P625  35      2             2           6            2
## 21       P626  42      1             2           4            5
## 22       P712  17      1             3           1            5
## 23       P725  35      2             2           6            2
## 24       P726  42      1             2           4            5
## 25       P812  17      1             3           1            5
## 26       P825  35      2             2           6            2
## 27       P826  42      1             2           4            5
## 28       P912  17      1             3           1            5
## 29       P925  35      2             2           6            2
## 30       P926  42      1             2           4            5
##    OccuPational.Hazards Genetic.Risk chronic.Lung.Disease Balanced.Diet
## 1                     3            4                    2             2
## 2                     3            4                    2             2
## 3                     3            6                    6             6
## 4                     6            5                    5             4
## 5                     3            4                    2             2
## 6                     3            6                    6             6
## 7                     6            5                    5             4
## 8                     3            6                    6             6
## 9                     6            5                    5             4
## 10                    3            4                    2             2
## 11                    3            6                    6             6
## 12                    6            5                    5             4
## 13                    3            4                    2             2
## 14                    3            6                    6             6
## 15                    6            5                    5             4
## 16                    3            4                    2             2
## 17                    3            6                    6             6
## 18                    6            5                    5             4
## 19                    3            4                    2             2
## 20                    3            6                    6             6
## 21                    6            5                    5             4
## 22                    3            4                    2             2
## 23                    3            6                    6             6
## 24                    6            5                    5             4
## 25                    3            4                    2             2
## 26                    3            6                    6             6
## 27                    6            5                    5             4
## 28                    3            4                    2             2
## 29                    3            6                    6             6
## 30                    6            5                    5             4
##    Obesity Smoking Passive.Smoker Chest.Pain Coughing.of.Blood Fatigue
## 1        2       2              4          2                 3       1
## 2        2       2              4          2                 3       1
## 3        4       6              8          7                 6       5
## 4        6       7              7          2                 3       8
## 5        2       2              4          2                 3       1
## 6        4       6              8          7                 6       5
## 7        6       7              7          2                 3       8
## 8        4       6              8          7                 6       5
## 9        6       7              7          2                 3       8
## 10       2       2              4          2                 3       1
## 11       4       6              8          7                 6       5
## 12       6       7              7          2                 3       8
## 13       2       2              4          2                 3       1
## 14       4       6              8          7                 6       5
## 15       6       7              7          2                 3       8
## 16       2       2              4          2                 3       1
## 17       4       6              8          7                 6       5
## 18       6       7              7          2                 3       8
## 19       2       2              4          2                 3       1
## 20       4       6              8          7                 6       5
## 21       6       7              7          2                 3       8
## 22       2       2              4          2                 3       1
## 23       4       6              8          7                 6       5
## 24       6       7              7          2                 3       8
## 25       2       2              4          2                 3       1
## 26       4       6              8          7                 6       5
## 27       6       7              7          2                 3       8
## 28       2       2              4          2                 3       1
## 29       4       6              8          7                 6       5
## 30       6       7              7          2                 3       8
##    Weight.Loss Shortness.of.Breath Wheezing Swallowing.Difficulty
## 1            3                   7        8                     6
## 2            3                   7        8                     6
## 3            5                   4        6                     5
## 4            7                   7        3                     8
## 5            3                   7        8                     6
## 6            5                   4        6                     5
## 7            7                   7        3                     8
## 8            5                   4        6                     5
## 9            7                   7        3                     8
## 10           3                   7        8                     6
## 11           5                   4        6                     5
## 12           7                   7        3                     8
## 13           3                   7        8                     6
## 14           5                   4        6                     5
## 15           7                   7        3                     8
## 16           3                   7        8                     6
## 17           5                   4        6                     5
## 18           7                   7        3                     8
## 19           3                   7        8                     6
## 20           5                   4        6                     5
## 21           7                   7        3                     8
## 22           3                   7        8                     6
## 23           5                   4        6                     5
## 24           7                   7        3                     8
## 25           3                   7        8                     6
## 26           5                   4        6                     5
## 27           7                   7        3                     8
## 28           3                   7        8                     6
## 29           5                   4        6                     5
## 30           7                   7        3                     8
##    Clubbing.of.Finger.Nails Frequent.Cold Dry.Cough Snoring  Level     MD
## 1                         2             1         7       2 Medium 51.897
## 2                         2             1         7       2 Medium 51.897
## 3                         4             6         5       7   High 57.487
## 4                         9             1         6       2   High 52.701
## 5                         2             1         7       2 Medium 51.897
## 6                         4             6         5       7   High 57.487
## 7                         9             1         6       2   High 52.701
## 8                         4             6         5       7   High 57.487
## 9                         9             1         6       2   High 52.701
## 10                        2             1         7       2 Medium 51.897
## 11                        4             6         5       7   High 57.487
## 12                        9             1         6       2   High 52.701
## 13                        2             1         7       2 Medium 51.897
## 14                        4             6         5       7   High 57.487
## 15                        9             1         6       2   High 52.701
## 16                        2             1         7       2 Medium 51.897
## 17                        4             6         5       7   High 57.136
## 18                        9             1         6       2   High 52.701
## 19                        2             1         7       2 Medium 51.897
## 20                        4             6         5       7   High 57.487
## 21                        9             1         6       2   High 52.701
## 22                        2             1         7       2 Medium 51.897
## 23                        4             6         5       7   High 57.487
## 24                        9             1         6       2   High 52.701
## 25                        2             1         7       2 Medium 51.897
## 26                        4             6         5       7   High 57.487
## 27                        9             1         6       2   High 52.701
## 28                        2             1         7       2 Medium 51.897
## 29                        4             6         5       7   High 57.487
## 30                        9             1         6       2   High 52.701
##    outlier_maha
## 1          TRUE
## 2          TRUE
## 3          TRUE
## 4          TRUE
## 5          TRUE
## 6          TRUE
## 7          TRUE
## 8          TRUE
## 9          TRUE
## 10         TRUE
## 11         TRUE
## 12         TRUE
## 13         TRUE
## 14         TRUE
## 15         TRUE
## 16         TRUE
## 17         TRUE
## 18         TRUE
## 19         TRUE
## 20         TRUE
## 21         TRUE
## 22         TRUE
## 23         TRUE
## 24         TRUE
## 25         TRUE
## 26         TRUE
## 27         TRUE
## 28         TRUE
## 29         TRUE
## 30         TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#Then drop those outliers:}
\NormalTok{df_clean<-}\StringTok{ }\NormalTok{df[}\OperatorTok{-}\KeywordTok{which}\NormalTok{(df}\OperatorTok{$}\NormalTok{outlier_maha }\OperatorTok{==}\OtherTok{TRUE}\NormalTok{),]}
\NormalTok{df_clean <-df_clean[,}\DecValTok{1}\OperatorTok{:}\DecValTok{25}\NormalTok{] }\CommentTok{# the dataset after dropping outliers}
\end{Highlighting}
\end{Shaded}

\section{Data visualization}\label{data-visualization}


\end{document}
